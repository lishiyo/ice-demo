<template name="contactsCreate">
	{{> contacts }}

	<div class="row next-step-row">
    <button class="btn next-step">Go to the last step</button>
  </div>
</template>

<template name="crumbsStepTwo">
crumbs step two
</template>

<template name="contacts">
	<div class="profile">
    <div class="row">
        <!-- <h5> -->
          <div class="title col-md-6 col-lg-6 col-sm-6">
            <h3>Create Contacts</h3>
          </div>
          <div class="crumbs-wrapper">
            <div class="col-lg-2 col-sm-2 col-md-2 crumb-word">
              <p>Step Two</p>
              <p class="sub-text">Create contacts</p>
            </div>
            <div class="crumb col-md-4 col-sm-4 col-lg-4 col-xs-4">
              {{> crumbsStepOne }}
            </div>
          </div>
        <!-- </h5> -->
      </div>

		<div class="profile-container">
		  <p>Contacts are people who we'll reach out to, in case of a crisis.</p>
		  <br>
		  <br>
		  <h5>Required</h5>
		  <p>You are required to add at least <strong>one contact</strong>.</p>
		  <div class="row form-content">
				{{> newContactOrProfileForm }}
			</div>
		</div>

	</div>
</template>

<template name="newContactOrProfileForm">
	<div class="row">
	   <div class="col-lg-3 col-md-3 col-sm-3 profile-wrap">
	    <figure>
	      <img src="/images/icons/me.png">
	      <figcaption>New Contact</figcaption>
	    </figure>
	  </div>
	  <div class="col-lg-8 col-md-8 col-sm-8" style="padding-bottom: 30px">
	  	{{> yield region="formWrapper"}} <!-- right column -->
	  </div>
	</div>
</template>

<template name="formWrapper">
	{{> existingProfiles }}
	{{> yield region="form" }}
</template>

<template name="newContactForm">

  	<p>Or, Create a New Contact </p>

    {{#autoForm id="newContactForm" type="insert" collection="Contacts" }}
		  {{> afQuickField name="profile" }}
		  <!-- {{> afQuickField name="belongedSafeboxes" options=userSafeboxes }} -->
		  <!-- {{> afQuickField name="belongedGroups" options=userGroups label="Groups"}} -->
		  {{> afQuickField name="relation" }}
		  {{> afQuickField name="type" type="hidden" value="contact" }}

		  <div class="form-group group button-group" style="width: 100%; text-align: right; margin-right: -40px; margin-top: 10px;">
		    <button type="submit" class="btn">Save Contact</button>
		    <button type="reset" class="btn btn-reset">Reset Form</button>
		  </div>
		{{/autoForm}}

</template>

<template name="newContactProfileForm">
	<p> {{ profile.fullName }} </p>
    {{#autoForm id="newContactProfileForm" type="update" collection="Contacts" doc=profile }}
		  {{> afQuickField name="profile" }}
		  <!-- {{> afQuickField name="belongedSafeboxes" options=userSafeboxes }} -->
		  <!-- {{> afQuickField name="belongedGroups" options=userGroups label="Groups"}} -->
		  {{> afQuickField name="relation" class="relation-group" }}

		  <div class="form-group group button-group" style="width: 100%; text-align: right; margin-right: -40px; margin-top: 10px;">
		    <button type="submit" class="btn">Update Profile</button>
		    <button type="reset" class="btn btn-reset">Reset Form</button>
		  </div>
		{{/autoForm}}
</template>

<template name="existingProfiles">
	<h5>Select an Existing Profile.</h5>
	<p>If you have already created a Profile for this Contact, select them below.</p>
	<ul class="cards group">
	{{#each profiles}}
		<li class="profile-card card">
			<img src="/images/icons/me.png">
			<p> {{ this.fullName }} </p>
		</li>
	{{/each}}
	</ul>
</template>
<!--
<template name="contact">
	<li>{{ fullName }}</li>
</template> -->

<template name="contactSuccess">
	<div class="row">
		<div class="notifications">
			<p>Awesome! You currently have {{ contactsCount }} contacts.</p>
		</div>

		<h5>Recommended</h5>
		<p>We highly recommend adding at least <strong>three contacts</strong> for different crisis levels.</p>

		<button class="btn" id="add-more">Add another contact</button>
	</div>
</template>
